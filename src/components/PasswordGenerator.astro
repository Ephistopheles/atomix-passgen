<main
    class="flex items-center justify-center min-h-screen bg-gray-200 select-none relative px-4 sm:px-6"
>
    <div
        id="toast"
        class="hidden absolute top-4 sm:top-6 left-1/2 -translate-x-1/2 bg-white text-gray-950 text-xs sm:text-sm px-3 sm:px-4 py-2 rounded-md shadow-md animate-fade-in-out"
    >
        ✅ Contraseña copiada
    </div>

    <section
        class="w-full max-w-md p-4 sm:p-6 bg-gray-100 rounded-xl shadow-[20px_5px_30px_rgba(0,0,0,0.4)] border border-gray-200"
    >
        <h1
            class="text-xl sm:text-2xl font-bold mb-4 text-center text-gray-800"
        >
            Generador de contraseñas
        </h1>

        <div class="flex flex-col sm:flex-row gap-2">
            <input
                id="password"
                type="text"
                readonly
                placeholder="Contraseña generada"
                class="flex-1 px-3 py-2 border rounded-lg text-sm sm:text-base text-gray-900 hover:border-[#0352D1] focus:outline-none focus:ring-2 focus:ring-[#0352D1]"
            />

            <button
                id="generate"
                class="px-3 sm:px-4 py-2 bg-[#0352D1] text-white font-medium rounded-lg hover:bg-blue-700 transition text-sm sm:text-base"
            >
                Generar
            </button>
        </div>

        <div class="mt-6 p-3 sm:p-4 border rounded-lg bg-gray-50">
            <h2 class="text-base sm:text-lg font-semibold mb-3 text-gray-800">
                Personalizar contraseña
            </h2>

            <div class="mb-4">
                <label class="block text-sm font-medium mb-1 text-gray-700">
                    Longitud: <span id="lengthValue">12</span>
                </label>

                <input
                    id="length"
                    type="range"
                    min="6"
                    max="32"
                    value="12"
                    class="w-full accent-[#0352D1]"
                />
            </div>

            <div class="space-y-2 text-gray-700 text-sm sm:text-base">
                <label class="flex items-center gap-2">
                    <input
                        id="upper"
                        type="checkbox"
                        checked
                        class="accent-[#0352D1]"
                    />
                    Mayúsculas (A–Z)
                </label>

                <label class="flex items-center gap-2">
                    <input
                        id="lower"
                        type="checkbox"
                        checked
                        class="accent-[#0352D1]"
                    />
                    Minúsculas (a–z)
                </label>

                <label class="flex items-center gap-2">
                    <input
                        id="numbers"
                        type="checkbox"
                        checked
                        class="accent-[#0352D1]"
                    />
                    Números (0–9)
                </label>

                <label class="flex items-center gap-2">
                    <input
                        id="symbols"
                        type="checkbox"
                        checked
                        class="accent-[#0352D1]"
                    />
                    Símbolos (!@#$%^&*)
                </label>
            </div>
        </div>
    </section>

    <script>
        document.addEventListener("DOMContentLoaded", () => {
            const passwordEl = document.getElementById("password");
            const lengthEl = document.getElementById("length");
            const lengthValue = document.getElementById("lengthValue");
            const toast = document.getElementById("toast");

            const upper = document.getElementById("upper");
            const lower = document.getElementById("lower");
            const numbers = document.getElementById("numbers");
            const symbols = document.getElementById("symbols");

            const generateBtn = document.getElementById("generate");

            function generatePassword() {
                const U = "ABCDEFGHIJKLMNOPQRSTUVWXYZ";
                const L = "abcdefghijklmnopqrstuvwxyz";
                const N = "0123456789";
                const S = "!@#$%^&*";

                let chars = "";
                if (upper.checked) chars += U;
                if (lower.checked) chars += L;
                if (numbers.checked) chars += N;
                if (symbols.checked) chars += S;

                if (!chars) return "";

                let result = "";
                for (let i = 0; i < lengthEl.value; i++) {
                    result += chars[Math.floor(Math.random() * chars.length)];
                }

                return result;
            }

            function updatePassword() {
                passwordEl.value = generatePassword();
            }

            function enforceOneChecked() {
                const all = [upper, lower, numbers, symbols];
                const checked = all.filter((c) => c.checked);

                if (checked.length === 0) {
                    this.checked = true;
                }
            }

            [upper, lower, numbers, symbols].forEach((c) =>
                c.addEventListener("change", () => {
                    enforceOneChecked.call(c);
                    updatePassword();
                }),
            );

            lengthEl.addEventListener("input", () => {
                lengthValue.textContent = lengthEl.value;
                updatePassword();
            });

            generateBtn.addEventListener("click", updatePassword);

            passwordEl.addEventListener("click", () => {
                navigator.clipboard.writeText(passwordEl.value);
                toast.classList.remove("hidden");
                setTimeout(() => toast.classList.add("hidden"), 3000);
            });

            updatePassword();
        });
    </script>
</main>
